<div class="container">
<h1>Mes Vélos</h1>
<%= link_to "ajouter une annonce de vélo", new_bike_path, class: "btn btn-primary" %>
</div>

<div class="container">
      <div class="row gap-3 w-75 p-3">
        <% @bikes.each do |bike| %>
        <div class="col-5-5">
          <%= link_to bike_path(bike), class: 'text-decoration-none' do %>
         <div class="card-product">
            <%# <% photo = @bike.photo.select.with_index { |photo, idx| idx == 0 } %>
              <%# <%= cl_image_tag photo.key, height: 300, width: 400, crop: :fill %>
            <div class="product-info">
              <div class="product-details">
                <h2><%= bike.name %></h2>
                <p><%= bike.address %></p>
              </div>
              <div>
                <h2 class="price"><%= bike.price %>/€ par jour</h2>
              </div>
              <% if bike.bookings.length > 0 %>
                <p>Réservations</p>
                <ul>
                  <% bike.bookings.each do |booking| %>
                  <% days = (booking.end_date - booking.start_date).to_i %>
                  <% bike = Bike.find(booking.bike_id) %>
                  <% price = bike.price %>
                  <% amount = days * price %>
                  <li>Reservé du <%= booking.start_date %> au <%= booking.end_date %> </li>
                  <p> <em> Montant de la réservation = <%= amount %> € </em> </p>
                  <% end %>
                </ul>
              <% end %>
            </div>
          </div>
        <% end %>
        </div>

        <% end %>
      </div>
</div>
